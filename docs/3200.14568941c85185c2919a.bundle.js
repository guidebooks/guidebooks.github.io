(self.webpackChunk_guidebooks_playground=self.webpackChunk_guidebooks_playground||[]).push([[3200,10561],{13758:(e,s,n)=>{"use strict";n.r(s),n.d(s,{initMainPty:()=>t.O});var t=n(62549)},62549:(e,s,n)=>{"use strict";n.d(s,{Z:()=>c,O:()=>d});var t=n(17187),i=n(96690),r=n(29224),o=function(e,s,n,t){return new(n||(n=Promise))((function(i,r){function o(e){try{h(t.next(e))}catch(e){r(e)}}function a(e){try{h(t.throw(e))}catch(e){r(e)}}function h(e){var s;e.done?i(e.value):(s=e.value,s instanceof n?s:new n((function(e){e(s)}))).then(o,a)}h((t=t.apply(e,s||[])).next())}))};function a(e){return`/plugin-bash-like/pty/message/${e}`}class h extends t.EventEmitter{constructor(){super(...arguments),this.isAlive=!0,this.readyState=i.kQ.OPEN,this.handleMessage=(e,s)=>{this.emit("message",s)}}init(e,s){return o(this,void 0,void 0,(function*(){const{ipcMain:t}=yield Promise.resolve().then(n.t.bind(n,7676,23));this.ipcMain=t,this.otherSide=s,this.messageChannel=a(e.execUUID),t.on(this.messageChannel,this.handleMessage),yield(0,r.disableBashSessions)(),yield(0,r.onConnection)((()=>{try{this.ipcMain.off(this.messageChannel,this.handleMessage)}catch(e){console.error("Error turning off PTY events",e)}}))(this)}))}close(){}send(e){try{this.otherSide.isDestroyed()||this.otherSide.send(this.messageChannel,e)}catch(e){console.error("Error sending PTY output to renderer",e)}}removeEventListener(e,s){this.off(e,s)}}class c extends t.EventEmitter{constructor(){super(...arguments),this.isAlive=!0,this.readyState=i.kQ.OPEN,this.handleMessage=(e,s)=>{this.emit("message",s)}}init(e){return o(this,void 0,void 0,(function*(){const{ipcRenderer:s}=yield Promise.resolve().then(n.t.bind(n,7676,23));this.ipcRenderer=s,this.messageChannel=a(e),window.addEventListener("beforeunload",(()=>{this.send(JSON.stringify({type:"kill",uuid:e})),this.ipcRenderer.off(this.messageChannel,this.handleMessage)})),s.once(`/exec/response/${e}`,((e,s)=>{!0===JSON.parse(s).returnValue&&(this.ipcRenderer.on(this.messageChannel,this.handleMessage),this.emit("open"))})),s.send("/exec/invoke",JSON.stringify({module:"plugin-bash-like",main:"initMainPty",hash:e,args:{execUUID:e}}))}))}close(){}send(e){try{this.ipcRenderer.send(this.messageChannel,e.toString())}catch(e){console.error("Error sending PTY message to main process",e)}}removeEventListener(e,s){this.off(e,s)}}function d(e,s){return o(this,void 0,void 0,(function*(){try{return yield(new h).init(e,s),!0}catch(e){return console.error("Error starting up pty",e),!1}}))}},67953:()=>{},10561:()=>{}}]);