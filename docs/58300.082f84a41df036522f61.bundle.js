"use strict";(self.webpackChunk_guidebooks_playground=self.webpackChunk_guidebooks_playground||[]).push([[58300,93850],{93850:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});var s=o(67294),i=o(91119),n=o(25824),r=o(50748),u=o(48317);class a extends s.PureComponent{constructor(t){super(t),this._blockRef=s.createRef(),i.Events.eventBus.onCommandComplete(this.props.uuid,this.onOutputRender.bind(this)),this.state={idx:0,model:(0,u.ZS)()}}onOutputRender(){this.setState((t=>({idx:t.idx+1,model:(0,u.ZS)()})))}doFocus(){this._blockRef.current&&this._blockRef.current.doFocus()}render(){return s.createElement(n.Z.Provider,{value:{prompt:this.props.prompt||"❯"}},s.createElement("div",{className:"kui--input-stripe repl"},s.createElement(r.Z,{ref:this._blockRef,idx:this.state.idx,uuid:`${this.props.uuid}-${this.state.idx}`,tab:this.props.tab,model:this.state.model,noOutput:!0,noPromptContext:!0,isFocused:!0,promptPlaceholder:this.props.promptPlaceholder},this.props.children)))}}},58300:(t,e,o)=>{o.r(e),o.d(e,{default:()=>d});var s=o(67294),i=o(91119),n=o(93850),r=o(48026),u=o(186),a=function(t,e,o,s){return new(o||(o=Promise))((function(i,n){function r(t){try{a(s.next(t))}catch(t){n(t)}}function u(t){try{a(s.throw(t))}catch(t){n(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,u)}a((s=s.apply(t,e||[])).next())}))};class d extends s.PureComponent{constructor(t){super(t),this._inputStripeRef=s.createRef();const e=new r.he;i.Events.eventBus.onceWithTabId("/tab/close/request",e.uuid,((t,e)=>a(this,void 0,void 0,(function*(){e.REPL.qexec("window close",void 0,void 0,{tab:e})})))),i.Events.eventBus.onCommandComplete(e.uuid,(({tab:t,command:e,response:o})=>a(this,void 0,void 0,(function*(){u.env.KUI_TEE_TO_FILE&&(yield(0,i.teeToFile)(o)),this.setState({promptPlaceholder:e}),this.doFocusInput(),setTimeout((()=>t.scrollToBottom()),50),setTimeout((()=>t.scrollToBottom()),150)})))),this.state={tab:void 0,model:e,promptPlaceholder:""}}onTabReady(t){this.setState({tab:t}),(0,i.pexecInCurrentTab)(this.props.commandLine.join(" "),t),this.doFocusInput()}doFocusInput(){this._inputStripeRef.current&&setTimeout((()=>this._inputStripeRef.current.doFocus()))}render(){return s.createElement("div",{className:"kui--full-height"},s.createElement(r.I5,{noActiveInput:!0,uuid:this.state.model.uuid,active:!0,state:this.state.model.state,onTabReady:this.onTabReady.bind(this)}),s.createElement(r.VK,{noHelp:this.props.noHelp,noSettings:this.props.noSettings},s.createElement(r.Hy,{className:"kui--input-stripe-in-status-stripe flex-fill"},this.state.tab&&s.createElement(n.default,{ref:this._inputStripeRef,promptPlaceholder:this.state.promptPlaceholder,uuid:this.state.model.uuid,tab:this.state.tab})),this.props.children))}}}}]);