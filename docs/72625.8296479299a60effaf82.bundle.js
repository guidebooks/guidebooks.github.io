"use strict";(self.webpackChunk_guidebooks_playground=self.webpackChunk_guidebooks_playground||[]).push([[72625],{72625:(e,t,n)=>{n.r(t),n.d(t,{filepathForResponses:()=>c,fetchMarkdownFile:()=>p,default:()=>l});var i=n(8575),o=n(26470),r=n(21030),a=n(72442),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function c(e){return(0,o.join)((0,o.dirname)(e),(0,o.basename)(e).replace(/\..*$/,"")+".json")}function p(e,t){return s(this,void 0,void 0,(function*(){const{pathname:n}=/^https?:/.test(e)?new URL(e):{pathname:e};if(/\.md$/.test(n)){const[n,i]=yield Promise.all([(0,a.O)(e,t),(0,a.O)(c(e),t,!0)]);return{data:"string"==typeof n?n:JSON.stringify(n),codeBlockResponses:"string"==typeof i?JSON.parse(i):i}}throw new Error("File extension not support")}))}function d(e){return s(this,void 0,void 0,(function*(){const{edit:t,header:n,preview:a,"snippet-base-path":s,receive:c,send:d,title:l,readonly:u,replace:f}=e.parsedOptions,h=e.parsedOptions.file||e.parsedOptions.f,m=void 0===c&&(void 0!==d||t),v=void 0===c&&void 0===d&&n,y=void 0===d&&(void 0!==c||a),{data:w="#",codeBlockResponses:b}=h?yield p(h,e):{data:e.command.trim().slice(e.command.indexOf(" ")+1).trim().replace(/\\n/g,"\n").replace(/\\t/g,"\t").replace(/--(no-)?(header|edit|preview|readonly|replace)\s*/g,"").replace(/(-t|--title|--send|--receive)\s+\S+\s*/g,"").replace(/^\\#/,"#").replace(/^"/,"").replace(/"$/,""),codeBlockResponses:void 0};h&&u&&r.Events.eventBus.emitWithTabId("/kui/tab/edit/unset",(0,r.getPrimaryTabId)(e.tab));const k=e.parsedOptions["base-url"]?(0,o.join)(e.parsedOptions["base-url"],"{filename}"):h?function(e){if(/^http:/.test(e)){const t=new URL(e);return t.pathname=t.pathname.replace((0,o.basename)(t.pathname),"{filename}"),(0,i.format)(t)}return e.replace((0,o.basename)(e),"{filename}")}(h):void 0;if(void 0!==w)return"#"===w||"commentary"===e.command?{apiVersion:"kui-shell/v1",kind:"CommentaryResponse",props:{edit:m,header:v,preview:y,replace:f,receive:c,send:d,snippetBasePath:s,title:l,children:"",baseUrl:k}}:{apiVersion:"kui-shell/v1",kind:"CommentaryResponse",props:{edit:m,header:v,preview:y,replace:f,receive:c,send:d,snippetBasePath:s,title:l,filepath:h,children:w,codeBlockResponses:b,baseUrl:k}};throw new Error("Insufficient arguments: must specify either --file or -f, or provide a comment on the command line")}))}function l(e){const t={boolean:["edit","header","preview","readonly","replace"]};e.listen("/commentary",d,{outputOnly:!0,flags:t}),e.listen("/#",d,{outputOnly:!0,noCoreRedirect:!0,flags:t})}},72442:(e,t,n)=>{n.d(t,{O:()=>r});var i=n(21030),o=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function r(e,{REPL:t},n=!1){return o(this,void 0,void 0,(function*(){try{if(/^https:/.test(e))return(yield t.rexec(`_fetchfile ${(0,i.encodeComponent)(e)}`)).content[0];{const n=i.Util.absolute(i.Util.expandHomeDir(e)),o=(yield t.rexec(`vfs fstat ${(0,i.encodeComponent)(n)} --with-data`)).content;if(o.isDirectory)throw new Error("Invalid filepath");return o.data}}catch(e){if(n)return;throw e}}))}}}]);